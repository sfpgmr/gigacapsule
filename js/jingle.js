'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _jsDenodeifyJs = require('../js/denodeify.js');

var _jsDenodeifyJs2 = _interopRequireDefault(_jsDenodeifyJs);

var _ipc = require('ipc');

var _ipc2 = _interopRequireDefault(_ipc);

var _remote = require('remote');

var _remote2 = _interopRequireDefault(_remote);

var _events = require('events');

var fs = _remote2['default'].require('fs');
var readFile = (0, _jsDenodeifyJs2['default'])(fs.readFile);

_ipc2['default'].on('playVideo', function (path) {
	d3.select('body').append('video').attr({ src: path, width: '100%', height: '100%', autoplay: 'autoplay', autobuffer: 'autobuffer' }).on('ended', function () {
		d3.select(this).remove();
		_ipc2['default'].send('playVideoEnd', path);
	});
});

function toArrayBuffer(buffer) {
	var ab = new ArrayBuffer(buffer.length);
	var view = new Uint8Array(ab);
	for (var i = 0; i < buffer.length; ++i) {
		view[i] = buffer[i];
	}
	return ab;
}

_ipc2['default'].on('play', function (path) {
	playContents(path);
});

var audioCtx;
var lylics = ['Ha hahaha...', 'おかしい ハッハッハッハ', 'Snake is here.', 'Music music music music show!', 'Oh, the hottest thing of the world!', 'Of the world... Oh!', 'Yellow Magic Orchestra!!', 'Music... Music... Y M O', 'YMO ready to lay on you!', 'Nice age.'];

var svg; //d3.select('body').append('svg').attr({'width':'1024px','height':'768px'});

window.onload = function () {
	// 初期化完了
	audioCtx = new AudioContext();
};

var Track = (function (_EventEmitter) {
	_inherits(Track, _EventEmitter);

	function Track(array, latency) {
		_classCallCheck(this, Track);

		latency = latency || 0;
		_get(Object.getPrototypeOf(Track.prototype), 'constructor', this).call(this);
		this.seqData = array;
		this.seqCounter = 0;
		this.latency = latency;
	}

	_createClass(Track, [{
		key: 'sequence',
		value: function sequence(currentTime) {
			var len = this.seqData.length;
			currentTime -= this.latency;
			while (len > this.seqCounter) {
				var seq = this.seqData[this.seqCounter];
				if (seq[0] <= currentTime) {
					seq[1](currentTime);
					++this.seqCounter;
				} else {
					return;
				}
				if (len <= this.seqCounter) {
					this.emit('end');
				}
			}
		}
	}]);

	return Track;
})(_events.EventEmitter);

;

var Tracks = (function (_EventEmitter2) {
	_inherits(Tracks, _EventEmitter2);

	function Tracks() {
		_classCallCheck(this, Tracks);

		_get(Object.getPrototypeOf(Tracks.prototype), 'constructor', this).call(this);
		this.tracks = [];
		this.endTrackCount = 0;
		this.end = false;
		this.latency = 0;
	}

	_createClass(Tracks, [{
		key: 'addTrack',
		value: function addTrack(array, latency) {
			var _this = this;

			latency = latency || 0;
			this.latency = latency;
			var track = new Track(array, latency);
			this.tracks.push(track);
			track.on('end', function () {
				++_this.endTrackCount;
				if (_this.endTrackCount == _this.tracks.length) {
					_this.emit('end');
					_this.end = true;
				}
			});
		}
	}, {
		key: 'sequence',
		value: function sequence(currentTime) {
			this.tracks.forEach(function (track) {
				track.sequence(currentTime);
			});
		}
	}]);

	return Tracks;
})(_events.EventEmitter);

var tracks = new Tracks();

var seqData = [
// seqtime anim
[1.025, hihat], [1.422, hihat], [1.819, hihat], [2.216, hihat], [2.613, hihat], [3.01, hihat], [3.407, hihat], [3.804, hihat], [4.201, hihat], [4.598, hihat], [4.995, hihat], [5.392, hihat], [5.789, hihat], [6.186, hihat], [6.583, hihat], [6.98, hihat], [7.377, hihat], [7.774, hihat], [8.171, hihat], [8.568, hihat], [8.965, hihat], [9.362, hihat], [9.759, hihat], [10.156, hihat], [10.553, hihat], [10.95, hihat], [11.347, hihat], [11.744, hihat], [12.141, hihat], [12.538, hihat], [12.935, hihat], [13.332, hihat], [13.729, hihat], [14.126, hihat], [14.523, hihat], [14.92, hihat], [15.317, hihat], [15.714, hihat]];

tracks.addTrack(seqData);
tracks.addTrack([[2.541, bass], [2.6, bass], [2.939, bass], [3.580, bass], [4.194, bass], [4.538, bass], [4.791, bass], [5.120, bass], [5.373, bass], [5.712, bass], [5.997, bass], [6.309, bass], [6.573, bass], [6.579, bass], [9.373, bass], [9.503, bass], [9.892, bass], [11.350, bass], [11.650, bass], [12.478, bass], [12.941, bass], [13.270, bass], [14.055, bass], [14.467, bass], [14.527, bass], [15.095, bass], [15.663, bass]]);

tracks.addTrack([[0.5, text(10, 450, 'Jingle Y.M.O.', 'white', '120px', 'sagoe')], [2.930, text(10, 450, 'Koyoi Anata To', 'red', '120px', 'sagoe')], [4.198, text(10, 150, 'Music', 'red', '160px', 'sagoe')], [4.549, text(10, 300, 'Snake is here.', 'white', '120px')], [4.838, text(500, 200, 'Music', 'red', '140px')], [5.394, text(200, 250, 'Music', 'red', '130px')], [5.980, text(600, 300, 'Music', 'red', '120px')], [6.775, text(200, 500, 'Show!', 'red', '240px')], [7.367, text(10, 300, 'Oh!,', 'White', '380px')], [8.047, text(10, 500, 'the hottest thing', 'White', '100px')], [8.810, text(10, 600, 'of the world!', 'White', '100px')], [9.900, text(10, 150, 'Yellow ', 'White', '200px')], [11.132, text(10, 350, 'Magic ', 'White', '200px')], [11.343, text(200, 400, 'Music', 'red', '240px')], [12.072, text(10, 550, 'Orchestra!', 'White', '200px')], [12.941, text(200, 600, 'Music', 'red', '240px')], [14.518, text(10, 450, 'Y.', 'red', '320px', null, 5000)], [15.117, text(350, 450, 'M.', 'red', '320px', null, 5000)], [15.713, text(690, 450, 'O.', 'red', '320px', null, 5000)], [16.456, text(10, 150, 'Y.M.O.', 'White', '200px')], [17.394, text(10, 310, 'ready to', 'White', '200px')], [17.854, text(10, 550, 'lay on you!', 'White', '200px')]], -0.15);

var fontCache;

function text(x, y, mes, color, size, font, duration) {
	return function () {
		duration = duration || 2500;
		var scale = 3.0;
		fontCache = font || fontCache || '';
		var text = svg.append('text').attr({ x: x, y: y, fill: color, 'text-anchor': 'start', opacity: 0.0, transform: 'scale(1.0)' }).style({ 'font-size': size, 'font-family': fontCache }).text(mes);
		var box = text.node().getBBox();
		var dx = box.width;
		var dy = box.height;
		text.attr({ x: x, y: y, fill: color, opacity: 1.0, transform: 'translate(' + dx + ',' + dy + '),scale(' + scale + '),translate(' + -dx + ',' + -dy + ')' }).transition().duration(500).attr({ x: x, y: y, transform: 'scale(1.0) translate(0 0)' }).transition().duration(duration).attr({ opacity: 0.0 }).remove();
	};
}

function bass() {
	var x = 512,
	    y = 384;
	var g = svg.append('g');

	g.attr({ transform: 'translate(' + x + ' ' + y + ')' }).transition().delay(500).remove();

	var colors = ['white', 'red', 'blue', 'green', 'magenta', 'yellow'];
	var color = colors[Math.random() * 6 | 0];
	g.append('ellipse').attr({
		rx: 680, ry: 680,
		cx: 0, cy: 0,
		'stroke-width': 0,
		fill: color,
		opacity: 0.5
	}).transition().duration(250).attr({ opacity: 0.0, rx: 0, ry: 0 });
}

function hihat() {
	var g = svg.append('g');
	var x = Math.random() * (1024 - 400);
	var y = Math.random() * (768 - 100) + 50;
	var r = 40;
	var colors = ['white', 'red', 'blue', 'green', 'magenta', 'yellow'];
	var color = colors[Math.random() * 6 | 0];
	g.attr('transform', 'translate(' + x + ' ' + y + ')');
	g.append('ellipse').attr({
		rx: r, ry: r,
		cx: 0, cy: 0,
		'stroke-width': 0,
		fill: color,
		opacity: 0.6
	}).transition().duration(200).attr({ cx: 150, rx: r * 2.5 });

	g.append('ellipse').attr({
		rx: r, ry: r,
		cx: 300, cy: 0,
		'stroke-width': 0,
		fill: color,
		opacity: 0.0
	}).transition().delay(200).attr('opacity', 0.6);

	g.append('ellipse').attr({
		rx: r, ry: r,
		cx: 400, cy: 0,
		'stroke-width': 0,
		fill: color,
		opacity: 0.0
	}).transition().delay(332).attr('opacity', 0.6);

	x = Math.random() * 1024;
	y = Math.random() * 768;

	g.attr({ opacity: 0.5 }).transition().delay(367).duration(2500).attr({ 'opacity': 0.0, transform: 'translate(' + x + ' ' + y + ') scale(0)' }).remove();

	// .transition()
	// .duration(5)

	// .attr('opacity',0.0);
}

function playContents(path) {
	console.log(path);
	readFile(path).then(function (data) {
		return new Promise(function (resolve, reject) {
			var ab = toArrayBuffer(data);
			console.log(ab.byteLength);
			audioCtx.decodeAudioData(ab, function (buffer) {
				resolve(buffer);
			}, function (err) {
				reject(new Error('decodeAudioData():error:'));
			});
		});
	}).then(function (buffer) {
		return new Promise(function (resolve, reject) {
			var source = audioCtx.createBufferSource();
			var end = false;
			source.buffer = buffer;
			source.connect(audioCtx.destination);
			source.loop = false;
			// アニメーションのスタート
			svg = d3.select('body').append('svg').attr({ 'width': '1024px', 'height': '768px' });
			source.start(0);
			setTimeout(function () {
				source.stop(0);
			}, source.buffer.duration / source.playbackRate.value * 1000);
			source.onended = function (e) {
				console.log('end');
				end = true;
				//				resolve();
			};

			d3.select(window).on('keydown', function () {
				source.stop();
				end = true;
			});

			d3.select(window).on('click', function () {
				source.stop();
				end = true;
			});
			var startTime = audioCtx.currentTime - 0.1;
			(function animate() {
				var currentTime = audioCtx.currentTime - startTime;
				tracks.sequence(currentTime);
				if (!end) {
					requestAnimationFrame(animate);
				} else {
					resolve();
				}
			})();
		});
	}).then(function () {
		_ipc2['default'].send('end');
	})['catch'](function (err) {
		console.log(err);
	});
}
//# sourceMappingURL=data:application/json;base64,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QUFLLENBQUMsRUFDYixDQUFDLEtBQUssRUFBQyxLQUFLLENBQUMsRUFDYixDQUFDLE1BQU0sRUFBQyxLQUFLLENBQUMsRUFDZCxDQUFDLE1BQU0sRUFBQyxLQUFLLENBQUMsRUFDZCxDQUFDLEtBQUssRUFBQyxLQUFLLENBQUMsRUFDYixDQUFDLE1BQU0sRUFBQyxLQUFLLENBQUMsRUFDZCxDQUFDLE1BQU0sRUFBQyxLQUFLLENBQUMsRUFDZCxDQUFDLE1BQU0sRUFBQyxLQUFLLENBQUMsRUFDZCxDQUFDLE1BQU0sRUFBQyxLQUFLLENBQUMsRUFDZCxDQUFDLE1BQU0sRUFBQyxLQUFLLENBQUMsRUFDZCxDQUFDLE1BQU0sRUFBQyxLQUFLLENBQUMsRUFDZCxDQUFDLE1BQU0sRUFBQyxLQUFLLENBQUMsRUFDZCxDQUFDLE1BQU0sRUFBQyxLQUFLLENBQUMsRUFDZCxDQUFDLE1BQU0sRUFBQyxLQUFLLENBQUMsRUFDZCxDQUFDLEtBQUssRUFBQyxLQUFLLENBQUMsRUFDYixDQUFDLE1BQU0sRUFBQyxLQUFLLENBQUMsRUFDZCxDQUFDLE1BQU0sRUFBQyxLQUFLLENBQUMsQ0FDYixDQUFDOztBQUVGLE1BQU0sQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDekIsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUNoQixDQUFDLEtBQUssRUFBQyxJQUFJLENBQUMsRUFDWixDQUFDLEdBQUcsRUFBQyxJQUFJLENBQUMsRUFDVixDQUFDLEtBQUssRUFBQyxJQUFJLENBQUMsRUFDWixDQUFDLEtBQUssRUFBQyxJQUFJLENBQUMsRUFDWixDQUFDLEtBQUssRUFBQyxJQUFJLENBQUMsRUFDWixDQUFDLEtBQUssRUFBQyxJQUFJLENBQUMsRUFDWixDQUFDLEtBQUssRUFBQyxJQUFJLENBQUMsRUFDWixDQUFDLEtBQUssRUFBQyxJQUFJLENBQUMsRUFDWixDQUFDLEtBQUssRUFBQyxJQUFJLENBQUMsRUFDWixDQUFDLEtBQUssRUFBQyxJQUFJLENBQUMsRUFDWixDQUFDLEtBQUssRUFBQyxJQUFJLENBQUMsRUFDWixDQUFDLEtBQUssRUFBQyxJQUFJLENBQUMsRUFDWixDQUFDLEtBQUssRUFBQyxJQUFJLENBQUMsRUFDWixDQUFDLEtBQUssRUFBQyxJQUFJLENBQUMsRUFDWixDQUFDLEtBQUssRUFBQyxJQUFJLENBQUMsRUFDWixDQUFDLEtBQUssRUFBQyxJQUFJLENBQUMsRUFDWixDQUFDLEtBQUssRUFBQyxJQUFJLENBQUMsRUFDWixDQUFDLE1BQU0sRUFBQyxJQUFJLENBQUMsRUFDYixDQUFDLE1BQU0sRUFBQyxJQUFJLENBQUMsRUFDYixDQUFDLE1BQU0sRUFBQyxJQUFJLENBQUMsRUFDYixDQUFDLE1BQU0sRUFBQyxJQUFJLENBQUMsRUFDYixDQUFDLE1BQU0sRUFBQyxJQUFJLENBQUMsRUFDYixDQUFDLE1BQU0sRUFBQyxJQUFJLENBQUMsRUFDYixDQUFDLE1BQU0sRUFBQyxJQUFJLENBQUMsRUFDYixDQUFDLE1BQU0sRUFBQyxJQUFJLENBQUMsRUFDYixDQUFDLE1BQU0sRUFBQyxJQUFJLENBQUMsRUFDYixDQUFDLE1BQU0sRUFBQyxJQUFJLENBQUMsQ0FDWixDQUFDLENBQUM7O0FBRUgsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUNmLENBQUMsR0FBRyxFQUFDLElBQUksQ0FBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLGVBQWUsRUFBQyxPQUFPLEVBQUMsT0FBTyxFQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQzFELENBQUMsS0FBSyxFQUFDLElBQUksQ0FBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLGdCQUFnQixFQUFDLEtBQUssRUFBQyxPQUFPLEVBQUMsT0FBTyxDQUFDLENBQUMsRUFDM0QsQ0FBQyxLQUFLLEVBQUMsSUFBSSxDQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsT0FBTyxFQUFDLEtBQUssRUFBQyxPQUFPLEVBQUMsT0FBTyxDQUFDLENBQUMsRUFDbEQsQ0FBQyxLQUFLLEVBQUMsSUFBSSxDQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsZ0JBQWdCLEVBQUMsT0FBTyxFQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQ3JELENBQUMsS0FBSyxFQUFDLElBQUksQ0FBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLE9BQU8sRUFBQyxLQUFLLEVBQUMsT0FBTyxDQUFDLENBQUMsRUFDM0MsQ0FBQyxLQUFLLEVBQUMsSUFBSSxDQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsT0FBTyxFQUFDLEtBQUssRUFBQyxPQUFPLENBQUMsQ0FBQyxFQUMzQyxDQUFDLEtBQUssRUFBQyxJQUFJLENBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxPQUFPLEVBQUMsS0FBSyxFQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQzNDLENBQUMsS0FBSyxFQUFDLElBQUksQ0FBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLE9BQU8sRUFBQyxLQUFLLEVBQUMsT0FBTyxDQUFDLENBQUMsRUFDM0MsQ0FBQyxLQUFLLEVBQUMsSUFBSSxDQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsTUFBTSxFQUFDLE9BQU8sRUFBQyxPQUFPLENBQUMsQ0FBQyxFQUMzQyxDQUFDLEtBQUssRUFBQyxJQUFJLENBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxtQkFBbUIsRUFBQyxPQUFPLEVBQUMsT0FBTyxDQUFDLENBQUMsRUFDeEQsQ0FBQyxLQUFLLEVBQUMsSUFBSSxDQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsZUFBZSxFQUFDLE9BQU8sRUFBQyxPQUFPLENBQUMsQ0FBQyxFQUNwRCxDQUFDLEtBQUssRUFBQyxJQUFJLENBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxTQUFTLEVBQUMsT0FBTyxFQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQzlDLENBQUMsTUFBTSxFQUFDLElBQUksQ0FBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLFFBQVEsRUFBQyxPQUFPLEVBQUMsT0FBTyxDQUFDLENBQUMsRUFDOUMsQ0FBQyxNQUFNLEVBQUMsSUFBSSxDQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsT0FBTyxFQUFDLEtBQUssRUFBQyxPQUFPLENBQUMsQ0FBQyxFQUM1QyxDQUFDLE1BQU0sRUFBQyxJQUFJLENBQUMsRUFBRSxFQUFDLEdB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QUMsQ0FDRCxJQUFJLENBQUMsWUFBSTtBQUNULG1CQUFJLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztFQUNoQixDQUFDLFNBQ0ksQ0FBQyxVQUFDLEdBQUcsRUFBRztBQUFDLFNBQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7RUFBQyxDQUFDLENBQUM7Q0FJbkMiLCJmaWxlIjoiamluZ2xlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xyXG5pbXBvcnQgZGVub2RlaWZ5IGZyb20gJy4uL2pzL2Rlbm9kZWlmeS5qcyc7XHJcbmltcG9ydCBpcGMgZnJvbSAnaXBjJztcclxuaW1wb3J0IHJlbW90ZSBmcm9tICdyZW1vdGUnO1xyXG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdldmVudHMnO1xyXG4gXHJcbnZhciBmcyA9IHJlbW90ZS5yZXF1aXJlKCdmcycpO1xyXG52YXIgcmVhZEZpbGUgPSBkZW5vZGVpZnkoZnMucmVhZEZpbGUpO1xyXG5cclxuaXBjLm9uKCdwbGF5VmlkZW8nLCBmdW5jdGlvbiAocGF0aCkge1xyXG4gICAgZDMuc2VsZWN0KCdib2R5JylcclxuXHRcdC5hcHBlbmQoJ3ZpZGVvJylcclxuXHRcdC5hdHRyKHsgc3JjOiBwYXRoLCB3aWR0aDogJzEwMCUnLCBoZWlnaHQ6ICcxMDAlJywgYXV0b3BsYXk6ICdhdXRvcGxheScsIGF1dG9idWZmZXI6ICdhdXRvYnVmZmVyJyB9KVxyXG5cdFx0Lm9uKCdlbmRlZCcsIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0ZDMuc2VsZWN0KHRoaXMpLnJlbW92ZSgpO1xyXG5cdFx0XHRpcGMuc2VuZCgncGxheVZpZGVvRW5kJywgcGF0aCk7XHJcblx0XHR9KTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiB0b0FycmF5QnVmZmVyKGJ1ZmZlcikge1xyXG4gICAgdmFyIGFiID0gbmV3IEFycmF5QnVmZmVyKGJ1ZmZlci5sZW5ndGgpO1xyXG4gICAgdmFyIHZpZXcgPSBuZXcgVWludDhBcnJheShhYik7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ1ZmZlci5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIHZpZXdbaV0gPSBidWZmZXJbaV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYWI7XHJcbn1cclxuXHJcbmlwYy5vbigncGxheScsZnVuY3Rpb24ocGF0aCl7XHJcblx0cGxheUNvbnRlbnRzKHBhdGgpO1xyXG59KTtcclxuXHJcbnZhciBhdWRpb0N0eDtcclxuXHR2YXIgbHlsaWNzID0gW1xyXG5cdFx0J0hhIGhhaGFoYS4uLicsXHJcblx0XHQn44GK44GL44GX44GEIOODj+ODg+ODj+ODg+ODj+ODg+ODjycsXHJcblx0XHQnU25ha2UgaXMgaGVyZS4nLFxyXG5cdFx0J011c2ljIG11c2ljIG11c2ljIG11c2ljIHNob3chJyxcclxuXHRcdCdPaCwgdGhlIGhvdHRlc3QgdGhpbmcgb2YgdGhlIHdvcmxkIScsXHJcblx0XHQnT2YgdGhlIHdvcmxkLi4uIE9oIScsXHJcblx0XHQnWWVsbG93IE1hZ2ljIE9yY2hlc3RyYSEhJyxcclxuXHRcdCdNdXNpYy4uLiBNdXNpYy4uLiBZIE0gTycsXHJcblx0XHQnWU1PIHJlYWR5IHRvIGxheSBvbiB5b3UhJyxcclxuXHRcdCdOaWNlIGFnZS4nXHRcdFxyXG5cdF07XHJcblxyXG5cclxudmFyIHN2ZzsgLy9kMy5zZWxlY3QoJ2JvZHknKS5hcHBlbmQoJ3N2ZycpLmF0dHIoeyd3aWR0aCc6JzEwMjRweCcsJ2hlaWdodCc6Jzc2OHB4J30pO1xyXG5cdFx0XHRcclxud2luZG93Lm9ubG9hZCA9ICgpPT57XHJcblx0Ly8g5Yid5pyf5YyW5a6M5LqGXHJcblx0YXVkaW9DdHggPSBuZXcgQXVkaW9Db250ZXh0KCk7XHJcbn1cclxuXHJcbmNsYXNzIFRyYWNrIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcclxuXHRjb25zdHJ1Y3RvcihhcnJheSxsYXRlbmN5KVxyXG5cdHtcclxuXHRcdGxhdGVuY3kgPSBsYXRlbmN5IHx8IDA7XHJcblx0XHRzdXBlcigpO1xyXG5cdFx0dGhpcy5zZXFEYXRhID0gYXJyYXk7XHJcblx0XHR0aGlzLnNlcUNvdW50ZXIgPSAwO1xyXG5cdFx0dGhpcy5sYXRlbmN5ID0gbGF0ZW5jeTtcclxuXHR9XHJcblx0XHJcblx0c2VxdWVuY2UoY3VycmVudFRpbWUpIHtcclxuXHRcdHZhciBsZW4gPSB0aGlzLnNlcURhdGEubGVuZ3RoO1xyXG5cdFx0Y3VycmVudFRpbWUgLT0gdGhpcy5sYXRlbmN5O1xyXG5cdFx0d2hpbGUgKGxlbiA+IHRoaXMuc2VxQ291bnRlcikge1xyXG5cdFx0XHR2YXIgc2VxID0gdGhpcy5zZXFEYXRhW3RoaXMuc2VxQ291bnRlcl07XHJcblx0XHRcdGlmIChzZXFbMF0gPD0gY3VycmVudFRpbWUpIHtcclxuXHRcdFx0XHRzZXFbMV0oY3VycmVudFRpbWUpO1xyXG5cdFx0XHRcdCsrdGhpcy5zZXFDb3VudGVyO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZihsZW4gPD0gdGhpcy5zZXFDb3VudGVyKXtcclxuXHRcdFx0XHR0aGlzLmVtaXQoJ2VuZCcpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59O1xyXG5cclxuY2xhc3MgVHJhY2tzIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcclxuXHRjb25zdHJ1Y3Rvcigpe1xyXG5cdFx0c3VwZXIoKTtcclxuXHRcdHRoaXMudHJhY2tzID0gW107XHJcblx0XHR0aGlzLmVuZFRyYWNrQ291bnQgPSAwO1xyXG5cdFx0dGhpcy5lbmQgPSBmYWxzZTtcclxuXHRcdHRoaXMubGF0ZW5jeSA9IDA7XHJcblx0fVxyXG5cdFxyXG5cdGFkZFRyYWNrKGFycmF5LGxhdGVuY3kpe1xyXG5cdFx0bGF0ZW5jeSA9IGxhdGVuY3kgfHwgMDtcclxuXHRcdHRoaXMubGF0ZW5jeSA9IGxhdGVuY3k7XHJcblx0XHR2YXIgdHJhY2sgPSBuZXcgVHJhY2soYXJyYXksbGF0ZW5jeSk7XHJcblx0XHR0aGlzLnRyYWNrcy5wdXNoKHRyYWNrKTtcclxuXHRcdHRyYWNrLm9uKCdlbmQnLCgpPT57XHJcblx0XHRcdCsrdGhpcy5lbmRUcmFja0NvdW50O1xyXG5cdFx0XHRpZih0aGlzLmVuZFRyYWNrQ291bnQgPT0gdGhpcy50cmFja3MubGVuZ3RoKXtcclxuXHRcdFx0XHR0aGlzLmVtaXQoJ2VuZCcpO1xyXG5cdFx0XHRcdHRoaXMuZW5kID0gdHJ1ZTtcclxuXHRcdFx0fVx0XHRcdFxyXG5cdFx0fSk7XHJcblx0fVxyXG5cdFxyXG5cdHNlcXVlbmNlKGN1cnJlbnRUaW1lKXtcclxuXHRcdHRoaXMudHJhY2tzLmZvckVhY2goKHRyYWNrKT0+e1xyXG5cdFx0XHR0cmFjay5zZXF1ZW5jZShjdXJyZW50VGltZSk7XHJcblx0XHR9KTtcclxuXHR9XHJcbn1cclxuXHJcbnZhciB0cmFja3MgPSBuZXcgVHJhY2tzKCk7XHJcblxyXG52YXIgc2VxRGF0YSA9IFtcclxuXHQvLyBzZXF0aW1lIGFuaW1cclxuWzEuMDI1LGhpaGF0XSxcclxuWzEuNDIyLGhpaGF0XSxcclxuWzEuODE5LGhpaGF0XSxcclxuWzIuMjE2LGhpaGF0XSxcclxuWzIuNjEzLGhpaGF0XSxcclxuWzMuMDEsaGloYXRdLFxyXG5bMy40MDcsaGloYXRdLFxyXG5bMy44MDQsaGloYXRdLFxyXG5bNC4yMDEsaGloYXRdLFxyXG5bNC41OTgsaGloYXRdLFxyXG5bNC45OTUsaGloYXRdLFxyXG5bNS4zOTIsaGloYXRdLFxyXG5bNS43ODksaGloYXRdLFxyXG5bNi4xODYsaGloYXRdLFxyXG5bNi41ODMsaGloYXRdLFxyXG5bNi45OCxoaWhhdF0sXHJcbls3LjM3NyxoaWhhdF0sXHJcbls3Ljc3NCxoaWhhdF0sXHJcbls4LjE3MSxoaWhhdF0sXHJcbls4LjU2OCxoaWhhdF0sXHJcbls4Ljk2NSxoaWhhdF0sXHJcbls5LjM2MixoaWhhdF0sXHJcbls5Ljc1OSxoaWhhdF0sXHJcblsxMC4xNTYsaGloYXRdLFxyXG5bMTAuNTUzLGhpaGF0XSxcclxuWzEwLjk1LGhpaGF0XSxcclxuWzExLjM0NyxoaWhhdF0sXHJcblsxMS43NDQsaGloYXRdLFxyXG5bMTIuMTQxLGhpaGF0XSxcclxuWzEyLjUzOCxoaWhhdF0sXHJcblsxMi45MzUsaGloYXRdLFxyXG5bMTMuMzMyLGhpaGF0XSxcclxuWzEzLjcyOSxoaWhhdF0sXHJcblsxNC4xMjYsaGloYXRdLFxyXG5bMTQuNTIzLGhpaGF0XSxcclxuWzE0LjkyLGhpaGF0XSxcclxuWzE1LjMxNyxoaWhhdF0sXHJcblsxNS43MTQsaGloYXRdXHJcbl07XHJcblxyXG50cmFja3MuYWRkVHJhY2soc2VxRGF0YSk7XHJcbnRyYWNrcy5hZGRUcmFjayhbXHJcblsyLjU0MSxiYXNzXSxcclxuWzIuNixiYXNzXSwgXHJcblsyLjkzOSxiYXNzXSxcclxuWzMuNTgwLGJhc3NdLFxyXG5bNC4xOTQsYmFzc10sXHJcbls0LjUzOCxiYXNzXSxcclxuWzQuNzkxLGJhc3NdLFxyXG5bNS4xMjAsYmFzc10sXHJcbls1LjM3MyxiYXNzXSxcclxuWzUuNzEyLGJhc3NdLFxyXG5bNS45OTcsYmFzc10sXHJcbls2LjMwOSxiYXNzXSxcclxuWzYuNTczLGJhc3NdLFxyXG5bNi41NzksYmFzc10sXHJcbls5LjM3MyxiYXNzXSxcclxuWzkuNTAzLGJhc3NdLFxyXG5bOS44OTIsYmFzc10sXHJcblsxMS4zNTAsYmFzc10sXHJcblsxMS42NTAsYmFzc10sXHJcblsxMi40NzgsYmFzc10sXHJcblsxMi45NDEsYmFzc10sXHJcblsxMy4yNzAsYmFzc10sXHJcblsxNC4wNTUsYmFzc10sXHJcblsxNC40NjcsYmFzc10sXHJcblsxNC41MjcsYmFzc10sXHJcblsxNS4wOTUsYmFzc10sXHJcblsxNS42NjMsYmFzc11cclxuXSk7XHJcblxyXG50cmFja3MuYWRkVHJhY2soW1xyXG5cdFswLjUsdGV4dCgxMCw0NTAsJ0ppbmdsZSBZLk0uTy4nLCd3aGl0ZScsJzEyMHB4Jywnc2Fnb2UnKV0sXHJcblx0WzIuOTMwLHRleHQoMTAsNDUwLCdLb3lvaSBBbmF0YSBUbycsJ3JlZCcsJzEyMHB4Jywnc2Fnb2UnKV0sXHJcblx0WzQuMTk4LHRleHQoMTAsMTUwLCdNdXNpYycsJ3JlZCcsJzE2MHB4Jywnc2Fnb2UnKV0sXHJcblx0WzQuNTQ5LHRleHQoMTAsMzAwLCdTbmFrZSBpcyBoZXJlLicsJ3doaXRlJywnMTIwcHgnKV0sXHJcblx0WzQuODM4LHRleHQoNTAwLDIwMCwnTXVzaWMnLCdyZWQnLCcxNDBweCcpXSxcclxuXHRbNS4zOTQsdGV4dCgyMDAsMjUwLCdNdXNpYycsJ3JlZCcsJzEzMHB4JyldLFxyXG5cdFs1Ljk4MCx0ZXh0KDYwMCwzMDAsJ011c2ljJywncmVkJywnMTIwcHgnKV0sXHJcblx0WzYuNzc1LHRleHQoMjAwLDUwMCwnU2hvdyEnLCdyZWQnLCcyNDBweCcpXSxcclxuXHRbNy4zNjcsdGV4dCgxMCwzMDAsJ09oISwnLCdXaGl0ZScsJzM4MHB4JyldLFxyXG5cdFs4LjA0Nyx0ZXh0KDEwLDUwMCwndGhlIGhvdHRlc3QgdGhpbmcnLCdXaGl0ZScsJzEwMHB4JyldLFxyXG5cdFs4LjgxMCx0ZXh0KDEwLDYwMCwnb2YgdGhlIHdvcmxkIScsJ1doaXRlJywnMTAwcHgnKV0sXHJcblx0WzkuOTAwLHRleHQoMTAsMTUwLCdZZWxsb3cgJywnV2hpdGUnLCcyMDBweCcpXSxcclxuXHRbMTEuMTMyLHRleHQoMTAsMzUwLCdNYWdpYyAnLCdXaGl0ZScsJzIwMHB4JyldLFxyXG5cdFsxMS4zNDMsdGV4dCgyMDAsNDAwLCdNdXNpYycsJ3JlZCcsJzI0MHB4JyldLFxyXG5cdFsxMi4wNzIsdGV4dCgxMCw1NTAsJ09yY2hlc3RyYSEnLCdXaGl0ZScsJzIwMHB4JyldLFxyXG5cdFsxMi45NDEsdGV4dCgyMDAsNjAwLCdNdXNpYycsJ3JlZCcsJzI0MHB4JyldLFxyXG5cdFsxNC41MTgsdGV4dCgxMCw0NTAsJ1kuJywncmVkJywnMzIwcHgnLG51bGwsNTAwMCldLFxyXG5cdFsxNS4xMTcsdGV4dCgzNTAsNDUwLCdNLicsJ3JlZCcsJzMyMHB4JyxudWxsLDUwMDApXSxcclxuXHRbMTUuNzEzLHRleHQoNjkwLDQ1MCwnTy4nLCdyZWQnLCczMjBweCcsbnVsbCw1MDAwKV0sXHJcblx0WzE2LjQ1Nix0ZXh0KDEwLDE1MCwnWS5NLk8uJywnV2hpdGUnLCcyMDBweCcpXSxcclxuXHRbMTcuMzk0LHRleHQoMTAsMzEwLCdyZWFkeSB0bycsJ1doaXRlJywnMjAwcHgnKV0sXHJcblx0WzE3Ljg1NCx0ZXh0KDEwLDU1MCwnbGF5IG9uIHlvdSEnLCdXaGl0ZScsJzIwMHB4JyldXHJcbl0sLTAuMTUpO1xyXG5cclxudmFyIGZvbnRDYWNoZTtcclxuXHJcbmZ1bmN0aW9uIHRleHQoeCx5LG1lcyxjb2xvcixzaXplLGZvbnQsZHVyYXRpb24pe1xyXG5cdHJldHVybiAoKSA9PiB7XHJcblx0XHRkdXJhdGlvbiA9IGR1cmF0aW9uIHx8IDI1MDA7XHJcblx0XHR2YXIgc2NhbGUgPSAzLjA7XHJcblx0XHRmb250Q2FjaGUgPSBmb250IHx8IGZvbnRDYWNoZSB8fCAnJztcclxuXHRcdHZhciB0ZXh0ID0gc3ZnLmFwcGVuZCgndGV4dCcpXHJcblx0XHRcdC5hdHRyKHt4OngseTp5LGZpbGw6Y29sb3IsJ3RleHQtYW5jaG9yJzonc3RhcnQnLG9wYWNpdHk6MC4wLHRyYW5zZm9ybTogJ3NjYWxlKDEuMCknfSlcclxuXHRcdFx0LnN0eWxlKHsnZm9udC1zaXplJzpzaXplLCdmb250LWZhbWlseSc6Zm9udENhY2hlfSlcclxuXHRcdFx0LnRleHQobWVzKTtcclxuXHRcdFx0dmFyIGJveCA9IHRleHQubm9kZSgpLmdldEJCb3goKTtcclxuXHRcdFx0dmFyIGR4ID0gYm94LndpZHRoIDtcclxuXHRcdFx0dmFyIGR5ID0gYm94LmhlaWdodDtcclxuXHRcdFx0dGV4dC5hdHRyKHt4OngseTp5LGZpbGw6Y29sb3Isb3BhY2l0eToxLjAsdHJhbnNmb3JtOiAndHJhbnNsYXRlKCcgKyBkeCArICcsJyArIGR5ICsgJyksc2NhbGUoJyArIHNjYWxlICsgJyksdHJhbnNsYXRlKCcgKyAoLWR4KSArICcsJyArICgtZHkpICsgJyknfSlcclxuXHRcdFx0LnRyYW5zaXRpb24oKVxyXG5cdFx0XHQuZHVyYXRpb24oNTAwKVxyXG5cdFx0XHQuYXR0cih7eDp4LHk6eSx0cmFuc2Zvcm06J3NjYWxlKDEuMCkgdHJhbnNsYXRlKDAgMCknfSlcclxuXHRcdFx0LnRyYW5zaXRpb24oKVxyXG5cdFx0XHQuZHVyYXRpb24oZHVyYXRpb24pXHJcblx0XHRcdC5hdHRyKHtvcGFjaXR5OjAuMH0pXHJcblx0XHRcdC5yZW1vdmUoKTtcclxuXHR9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBiYXNzKClcclxue1xyXG5cdHZhciB4ID0gNTEyLFxyXG5cdFx0eSA9IDM4NDtcclxuXHR2YXIgZyA9IHN2Z1xyXG5cdC5hcHBlbmQoJ2cnKTtcclxuXHRcclxuXHRnLmF0dHIoe3RyYW5zZm9ybTondHJhbnNsYXRlKCcgKyB4ICsgJyAnICArIHkgICsgJyknfSlcclxuXHQudHJhbnNpdGlvbigpXHJcblx0LmRlbGF5KDUwMClcclxuXHQucmVtb3ZlKCk7XHJcblx0XHJcblx0dmFyIGNvbG9ycyA9IFsnd2hpdGUnLCdyZWQnLCdibHVlJywnZ3JlZW4nLCdtYWdlbnRhJywneWVsbG93J107XHJcblx0dmFyIGNvbG9yID0gY29sb3JzWyhNYXRoLnJhbmRvbSgpICogNikgfCAwXTtcclxuICAgIGcuYXBwZW5kKCdlbGxpcHNlJylcclxuXHQuYXR0cih7XHJcblx0XHRyeDo2ODAscnk6NjgwLFxyXG5cdFx0Y3g6MCxjeTowLFxyXG5cdFx0J3N0cm9rZS13aWR0aCc6MCxcclxuXHRcdGZpbGw6Y29sb3IsXHJcblx0XHRvcGFjaXR5OjAuNVxyXG5cdH0pXHJcblx0LnRyYW5zaXRpb24oKVxyXG5cdC5kdXJhdGlvbigyNTApXHJcblx0LmF0dHIoe29wYWNpdHk6MC4wLHJ4OjAscnk6MH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoaWhhdCgpe1xyXG5cdHZhciBnID0gc3ZnXHJcblx0LmFwcGVuZCgnZycpO1xyXG5cdHZhciB4ID0gTWF0aC5yYW5kb20oKSAqICgxMDI0IC0gNDAwKTtcclxuXHR2YXIgeSA9IE1hdGgucmFuZG9tKCkgKiAoNzY4IC0gMTAwKSArIDUwO1xyXG4gICAgdmFyIHIgPSA0MDtcclxuXHR2YXIgY29sb3JzID0gWyd3aGl0ZScsJ3JlZCcsJ2JsdWUnLCdncmVlbicsJ21hZ2VudGEnLCd5ZWxsb3cnXTtcclxuXHR2YXIgY29sb3IgPSBjb2xvcnNbKE1hdGgucmFuZG9tKCkgKiA2KSB8IDBdO1xyXG5cdGcuYXR0cigndHJhbnNmb3JtJywndHJhbnNsYXRlKCcgKyB4ICsgJyAnICsgeSArICcpJyk7XHJcblx0Zy5hcHBlbmQoJ2VsbGlwc2UnKVxyXG5cdC5hdHRyKHtcclxuXHRcdHJ4OnIscnk6cixcclxuXHRcdGN4OjAsY3k6MCxcclxuXHRcdCdzdHJva2Utd2lkdGgnOjAsXHJcblx0XHRmaWxsOmNvbG9yLFxyXG5cdFx0b3BhY2l0eTowLjZcclxuXHRcdH0pXHJcblx0LnRyYW5zaXRpb24oKVxyXG5cdC5kdXJhdGlvbigyMDApXHJcblx0LmF0dHIoe2N4OjE1MCxyeDpyICogMi41fSk7XHJcblx0XHJcblx0Zy5hcHBlbmQoJ2VsbGlwc2UnKVxyXG5cdC5hdHRyKHtcclxuXHRcdHJ4OnIscnk6cixcclxuXHRcdGN4OjMwMCxjeTowLFxyXG5cdFx0J3N0cm9rZS13aWR0aCc6MCxcclxuXHRcdGZpbGw6Y29sb3IsXHJcblx0XHRvcGFjaXR5OjAuMFxyXG5cdFx0fSlcclxuXHQudHJhbnNpdGlvbigpXHJcblx0LmRlbGF5KDIwMClcclxuXHQuYXR0cignb3BhY2l0eScsMC42KTtcclxuXHJcblx0Zy5hcHBlbmQoJ2VsbGlwc2UnKVxyXG5cdC5hdHRyKHtcclxuXHRcdHJ4OnIscnk6cixcclxuXHRcdGN4OjQwMCxjeTowLFxyXG5cdFx0J3N0cm9rZS13aWR0aCc6MCxcclxuXHRcdGZpbGw6Y29sb3IsXHJcblx0XHRvcGFjaXR5OjAuMFxyXG5cdFx0fSlcclxuXHQudHJhbnNpdGlvbigpXHJcblx0LmRlbGF5KDMzMilcclxuXHQuYXR0cignb3BhY2l0eScsMC42KTtcclxuXHJcblx0eCA9IE1hdGgucmFuZG9tKCkgKiAxMDI0O1xyXG5cdHkgPSBNYXRoLnJhbmRvbSgpICogNzY4O1xyXG5cdFxyXG5cdGcuYXR0cih7b3BhY2l0eTowLjV9KVxyXG5cdC50cmFuc2l0aW9uKClcclxuXHQuZGVsYXkoMzY3KVxyXG5cdC5kdXJhdGlvbigyNTAwKVxyXG5cdC5hdHRyKHsnb3BhY2l0eSc6MC4wLHRyYW5zZm9ybTondHJhbnNsYXRlKCcgKyB4ICsgJyAnICsgeSArICcpIHNjYWxlKDApJ30pXHJcblx0LnJlbW92ZSgpO1xyXG5cdFxyXG5cdC8vIC50cmFuc2l0aW9uKClcclxuXHQvLyAuZHVyYXRpb24oNSlcclxuXHJcblx0Ly8gLmF0dHIoJ29wYWNpdHknLDAuMCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBsYXlDb250ZW50cyhwYXRoKVxyXG57XHJcblx0Y29uc29sZS5sb2cocGF0aCk7XHJcblx0cmVhZEZpbGUocGF0aClcclxuXHQudGhlbigoZGF0YSk9PntcclxuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSxyZWplY3QpPT57XHJcblx0XHRcdHZhciBhYiA9IHRvQXJyYXlCdWZmZXIoZGF0YSk7IFxyXG5cdFx0XHRjb25zb2xlLmxvZyhhYi5ieXRlTGVuZ3RoKTtcclxuXHRcdFx0YXVkaW9DdHguZGVjb2RlQXVkaW9EYXRhKGFiLChidWZmZXIpPT57XHJcblx0XHRcdFx0cmVzb2x2ZShidWZmZXIpO1xyXG5cdFx0XHR9LChlcnIpPT57cmVqZWN0KG5ldyBFcnJvcignZGVjb2RlQXVkaW9EYXRhKCk6ZXJyb3I6JykpO30pO1xyXG5cdFx0fSk7XHJcblx0fSlcclxuXHQudGhlbigoYnVmZmVyKT0+e1xyXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLHJlamVjdCk9PntcclxuXHRcdFx0dmFyIHNvdXJjZSA9IGF1ZGlvQ3R4LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO1xyXG5cdFx0XHR2YXIgZW5kID0gZmFsc2U7XHJcblx0XHRcdHNvdXJjZS5idWZmZXIgPSBidWZmZXI7XHJcblx0XHRcdHNvdXJjZS5jb25uZWN0KGF1ZGlvQ3R4LmRlc3RpbmF0aW9uKTtcclxuXHRcdFx0c291cmNlLmxvb3AgPSBmYWxzZTtcclxuXHRcdFx0Ly8g44Ki44OL44Oh44O844K344On44Oz44Gu44K544K/44O844OIXHJcblx0XHRcdHN2ZyA9IFxyXG5cdFx0XHRcdGQzLnNlbGVjdCgnYm9keScpXHJcblx0XHRcdFx0LmFwcGVuZCgnc3ZnJylcclxuXHRcdFx0XHQuYXR0cih7J3dpZHRoJzonMTAyNHB4JywnaGVpZ2h0JzonNzY4cHgnfSk7XHJcblx0XHRcdHNvdXJjZS5zdGFydCgwKTtcclxuXHRcdFx0c2V0VGltZW91dCgoKT0+e1xyXG5cdFx0XHRcdHNvdXJjZS5zdG9wKDApO1xyXG5cdFx0XHR9LCgoc291cmNlLmJ1ZmZlci5kdXJhdGlvbiAvIHNvdXJjZS5wbGF5YmFja1JhdGUudmFsdWUpICogMTAwMCkpO1xyXG5cdFx0XHRzb3VyY2Uub25lbmRlZCA9IGZ1bmN0aW9uKGUpXHJcblx0XHRcdHtcclxuXHRcdFx0XHRjb25zb2xlLmxvZygnZW5kJyk7XHJcblx0XHRcdFx0ZW5kID0gdHJ1ZTtcclxuLy9cdFx0XHRcdHJlc29sdmUoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0ZDMuc2VsZWN0KHdpbmRvdykub24oJ2tleWRvd24nLCgpPT57XHJcblx0XHRcdFx0c291cmNlLnN0b3AoKTtcclxuXHRcdFx0XHRlbmQgPSB0cnVlO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0XHJcblx0XHRcdGQzLnNlbGVjdCh3aW5kb3cpLm9uKCdjbGljaycsKCk9PntcclxuXHRcdFx0XHRzb3VyY2Uuc3RvcCgpO1xyXG5cdFx0XHRcdGVuZCA9IHRydWU7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHR2YXIgc3RhcnRUaW1lID0gYXVkaW9DdHguY3VycmVudFRpbWUgLSAwLjE7XHJcblx0XHRcdChmdW5jdGlvbiBhbmltYXRlKClcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHZhciBjdXJyZW50VGltZSA9IGF1ZGlvQ3R4LmN1cnJlbnRUaW1lIC0gc3RhcnRUaW1lO1xyXG5cdFx0XHRcdHRyYWNrcy5zZXF1ZW5jZShjdXJyZW50VGltZSk7XHJcblx0XHRcdFx0aWYoIWVuZCl7XHJcblx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XHJcblx0XHRcdFx0fSBlbHNle1xyXG5cdFx0XHRcdFx0cmVzb2x2ZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSkoKTtcclxuXHRcdH0pO1xyXG5cdH0pXHJcblx0LnRoZW4oKCk9PntcclxuXHRcdGlwYy5zZW5kKCdlbmQnKTtcclxuXHR9KVxyXG5cdC5jYXRjaCgoZXJyKT0+e2NvbnNvbGUubG9nKGVycik7fSk7XHJcblxyXG5cdFxyXG5cclxufVxyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
