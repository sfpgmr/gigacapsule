'use strict';

var _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();

var _get = function get(_x, _x2, _x3) { var _again = true; _function: while (_again) { var object = _x, property = _x2, receiver = _x3; desc = parent = getter = undefined; _again = false; if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { _x = parent; _x2 = property; _x3 = receiver; _again = true; continue _function; } } else if ('value' in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } } };

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }

function _inherits(subClass, superClass) { if (typeof superClass !== 'function' && superClass !== null) { throw new TypeError('Super expression must either be null or a function, not ' + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var _jsDenodeifyJs = require('../js/denodeify.js');

var _jsDenodeifyJs2 = _interopRequireDefault(_jsDenodeifyJs);

var _ipc = require('ipc');

var _ipc2 = _interopRequireDefault(_ipc);

var _remote = require('remote');

var _remote2 = _interopRequireDefault(_remote);

var _events = require('events');

var fs = _remote2['default'].require('fs');
var readFile = (0, _jsDenodeifyJs2['default'])(fs.readFile);

_ipc2['default'].on('playVideo', function (path) {
	d3.select('body').append('video').attr({ src: path, width: '100%', height: '100%', autoplay: 'autoplay', autobuffer: 'autobuffer' }).on('ended', function () {
		d3.select(this).remove();
		_ipc2['default'].send('playVideoEnd', path);
	});
});

function toArrayBuffer(buffer) {
	var ab = new ArrayBuffer(buffer.length);
	var view = new Uint8Array(ab);
	for (var i = 0; i < buffer.length; ++i) {
		view[i] = buffer[i];
	}
	return ab;
}
_ipc2['default'].on('play', function (path) {
	playContents(path);
});

var audioCtx;
var lylics = ['Ha hahaha...', 'おかしい ハッハッハッハ', 'Snake is here.', 'Music music music music show!', 'Oh, the hottest thing of the world!', 'Of the world... Oh!', 'Yellow Magic Orchestra!!', 'Music... Music... Y M O', 'YMO ready to lay on you!', 'Nice age.'];

var svg; //d3.select('body').append('svg').attr({'width':'1024px','height':'768px'});

window.onload = function () {
	// 初期化完了
	audioCtx = new AudioContext();
};

var Track = (function (_EventEmitter) {
	_inherits(Track, _EventEmitter);

	function Track(array, latency) {
		_classCallCheck(this, Track);

		latency = latency || 0;
		_get(Object.getPrototypeOf(Track.prototype), 'constructor', this).call(this);
		this.seqData = array;
		this.seqCounter = 0;
		this.latency = latency;
	}

	_createClass(Track, [{
		key: 'sequence',
		value: function sequence(currentTime) {
			var len = this.seqData.length;
			currentTime -= this.latency;
			while (len > this.seqCounter) {
				var seq = this.seqData[this.seqCounter];
				if (seq[0] <= currentTime) {
					seq[1](currentTime);
					++this.seqCounter;
				} else {
					return;
				}
				if (len <= this.seqCounter) {
					this.emit('end');
				}
			}
		}
	}]);

	return Track;
})(_events.EventEmitter);

;

var Tracks = (function (_EventEmitter2) {
	_inherits(Tracks, _EventEmitter2);

	function Tracks() {
		_classCallCheck(this, Tracks);

		_get(Object.getPrototypeOf(Tracks.prototype), 'constructor', this).call(this);
		this.tracks = [];
		this.endTrackCount = 0;
		this.end = false;
		this.latency = 0;
	}

	_createClass(Tracks, [{
		key: 'addTrack',
		value: function addTrack(array, latency) {
			var _this = this;

			latency = latency || 0;
			this.latency = latency;
			var track = new Track(array, latency);
			this.tracks.push(track);
			track.on('end', function () {
				++_this.endTrackCount;
				if (_this.endTrackCount == _this.tracks.length) {
					_this.emit('end');
					_this.end = true;
				}
			});
		}
	}, {
		key: 'sequence',
		value: function sequence(currentTime) {
			this.tracks.forEach(function (track) {
				track.sequence(currentTime);
			});
		}
	}]);

	return Tracks;
})(_events.EventEmitter);

var tracks = new Tracks();

var seqData = [
// seqtime anim
[1.025, hihat], [1.422, hihat], [1.819, hihat], [2.216, hihat], [2.613, hihat], [3.01, hihat], [3.407, hihat], [3.804, hihat], [4.201, hihat], [4.598, hihat], [4.995, hihat], [5.392, hihat], [5.789, hihat], [6.186, hihat], [6.583, hihat], [6.98, hihat], [7.377, hihat], [7.774, hihat], [8.171, hihat], [8.568, hihat], [8.965, hihat], [9.362, hihat], [9.759, hihat], [10.156, hihat], [10.553, hihat], [10.95, hihat], [11.347, hihat], [11.744, hihat], [12.141, hihat], [12.538, hihat], [12.935, hihat], [13.332, hihat], [13.729, hihat], [14.126, hihat], [14.523, hihat], [14.92, hihat], [15.317, hihat], [15.714, hihat]];

tracks.addTrack(seqData);
tracks.addTrack([[2.541, bass], [2.6, bass], [2.939, bass], [3.580, bass], [4.194, bass], [4.538, bass], [4.791, bass], [5.120, bass], [5.373, bass], [5.712, bass], [5.997, bass], [6.309, bass], [6.573, bass], [6.579, bass], [9.373, bass], [9.503, bass], [9.892, bass], [11.350, bass], [11.650, bass], [12.478, bass], [12.941, bass], [13.270, bass], [14.055, bass], [14.467, bass], [14.527, bass], [15.095, bass], [15.663, bass]]);

tracks.addTrack([[0.5, text(10, 450, 'Jingle Y.M.O.', 'white', '120px', 'sagoe')], [2.930, text(10, 450, 'Koyoi Anata To', 'red', '120px', 'sagoe')], [4.198, text(10, 150, 'Music', 'red', '160px', 'sagoe')], [4.549, text(10, 300, 'Snake is here.', 'white', '120px')], [4.838, text(500, 200, 'Music', 'red', '140px')], [5.394, text(200, 250, 'Music', 'red', '130px')], [5.980, text(600, 300, 'Music', 'red', '120px')], [6.775, text(200, 500, 'Show!', 'red', '240px')], [7.367, text(10, 300, 'Oh!,', 'White', '380px')], [8.047, text(10, 500, 'the hottest thing', 'White', '100px')], [8.810, text(10, 600, 'of the world.', 'White', '100px')], [9.900, text(10, 150, 'Yellow ', 'White', '200px')], [11.132, text(10, 350, 'Magic ', 'White', '200px')], [11.343, text(200, 400, 'Music', 'red', '240px')], [12.072, text(10, 550, 'Orchestra', 'White', '200px')], [12.941, text(200, 600, 'Music', 'red', '240px')], [14.518, text(10, 450, 'Y.', 'red', '320px', null, 5000)], [15.117, text(350, 450, 'M.', 'red', '320px', null, 5000)], [15.713, text(690, 450, 'O.', 'red', '320px', null, 5000)], [16.456, text(10, 150, 'Y.M.O.', 'White', '200px')], [17.394, text(10, 310, 'ready to', 'White', '200px')], [17.854, text(10, 550, 'lay on you!', 'White', '200px')]], -0.15);

var fontCache;

function text(x, y, mes, color, size, font, duration) {
	return function () {
		duration = duration || 2500;
		var scale = 3.0;
		fontCache = font || fontCache || '';
		var text = svg.append('text').attr({ x: x, y: y, fill: color, 'text-anchor': 'start', opacity: 0.0, transform: 'scale(1.0)' }).style({ 'font-size': size, 'font-family': fontCache }).text(mes);
		var box = text.node().getBBox();
		console.log(box.width + ' ' + box.height);
		var dx = box.width;
		var dy = box.height;
		text.attr({ x: x, y: y, fill: color, opacity: 1.0, transform: 'translate(' + dx + ',' + dy + '),scale(' + scale + '),translate(' + -dx + ',' + -dy + ')' }).transition().duration(500).attr({ x: x, y: y, transform: 'scale(1.0) translate(0 0)' }).transition().duration(duration).attr({ opacity: 0.0 }).remove();
	};
}

function bass() {
	var x = 512,
	    y = 384;
	var g = svg.append('g');

	g.attr({ transform: 'translate(' + x + ' ' + y + ')' }).transition().delay(500).remove();

	var colors = ['white', 'red', 'blue', 'green', 'magenta', 'yellow'];
	var color = colors[Math.random() * 6 | 0];
	g.append('ellipse').attr({
		rx: 680, ry: 680,
		cx: 0, cy: 0,
		'stroke-width': 0,
		fill: color,
		opacity: 0.5
	}).transition().duration(250).attr({ opacity: 0.0, rx: 0, ry: 0 });
}

function hihat() {
	var g = svg.append('g');
	var x = Math.random() * (1024 - 400);
	var y = Math.random() * (768 - 100) + 50;
	var r = 40;
	var colors = ['white', 'red', 'blue', 'green', 'magenta', 'yellow'];
	var color = colors[Math.random() * 6 | 0];
	g.attr('transform', 'translate(' + x + ' ' + y + ')');
	g.append('ellipse').attr({
		rx: r, ry: r,
		cx: 0, cy: 0,
		'stroke-width': 0,
		fill: color,
		opacity: 0.6
	}).transition().duration(200).attr({ cx: 150, rx: r * 2.5 });

	g.append('ellipse').attr({
		rx: r, ry: r,
		cx: 300, cy: 0,
		'stroke-width': 0,
		fill: color,
		opacity: 0.0
	}).transition().delay(200).attr('opacity', 0.6);

	g.append('ellipse').attr({
		rx: r, ry: r,
		cx: 400, cy: 0,
		'stroke-width': 0,
		fill: color,
		opacity: 0.0
	}).transition().delay(332).attr('opacity', 0.6);

	x = Math.random() * 1024;
	y = Math.random() * 768;

	g.attr({ opacity: 0.5 }).transition().delay(367).duration(2500).attr({ 'opacity': 0.0, transform: 'translate(' + x + ' ' + y + ') scale(0)' }).remove();

	// .transition()
	// .duration(5)

	// .attr('opacity',0.0);
}

function playContents(path) {
	console.log(path);
	readFile(path).then(function (data) {
		return new Promise(function (resolve, reject) {
			var ab = toArrayBuffer(data);
			console.log(ab.byteLength);
			audioCtx.decodeAudioData(ab, function (buffer) {
				resolve(buffer);
			}, function (err) {
				reject(new Error('decodeAudioData():error:'));
			});
		});
	}).then(function (buffer) {
		return new Promise(function (resolve, reject) {
			var source = audioCtx.createBufferSource();
			var end = false;
			source.buffer = buffer;
			source.connect(audioCtx.destination);
			source.onended = function () {
				console.log('end');
				end = true;
				resolve();
			};
			// アニメーションのスタート
			svg = d3.select('body').append('svg').attr({ 'width': '1024px', 'height': '768px' });
			source.start(0);
			var startTime = audioCtx.currentTime - 0.1;
			function animate() {
				var currentTime = audioCtx.currentTime - startTime;
				tracks.sequence(currentTime);
				if (!end) {
					requestAnimationFrame(animate);
				}
			}
			animate();
		});
	}).then(function () {})['catch'](function (err) {
		console.log(err);
	});
}
//# sourceMappingURL=data:application/json;base64,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QUssQ0FBQyxFQUNiLENBQUMsS0FBSyxFQUFDLEtBQUssQ0FBQyxFQUNiLENBQUMsTUFBTSxFQUFDLEtBQUssQ0FBQyxFQUNkLENBQUMsTUFBTSxFQUFDLEtBQUssQ0FBQyxFQUNkLENBQUMsS0FBSyxFQUFDLEtBQUssQ0FBQyxFQUNiLENBQUMsTUFBTSxFQUFDLEtBQUssQ0FBQyxFQUNkLENBQUMsTUFBTSxFQUFDLEtBQUssQ0FBQyxFQUNkLENBQUMsTUFBTSxFQUFDLEtBQUssQ0FBQyxFQUNkLENBQUMsTUFBTSxFQUFDLEtBQUssQ0FBQyxFQUNkLENBQUMsTUFBTSxFQUFDLEtBQUssQ0FBQyxFQUNkLENBQUMsTUFBTSxFQUFDLEtBQUssQ0FBQyxFQUNkLENBQUMsTUFBTSxFQUFDLEtBQUssQ0FBQyxFQUNkLENBQUMsTUFBTSxFQUFDLEtBQUssQ0FBQyxFQUNkLENBQUMsTUFBTSxFQUFDLEtBQUssQ0FBQyxFQUNkLENBQUMsS0FBSyxFQUFDLEtBQUssQ0FBQyxFQUNiLENBQUMsTUFBTSxFQUFDLEtBQUssQ0FBQyxFQUNkLENBQUMsTUFBTSxFQUFDLEtBQUssQ0FBQyxDQUNiLENBQUM7O0FBRUYsTUFBTSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUN6QixNQUFNLENBQUMsUUFBUSxDQUFDLENBQ2hCLENBQUMsS0FBSyxFQUFDLElBQUksQ0FBQyxFQUNaLENBQUMsR0FBRyxFQUFDLElBQUksQ0FBQyxFQUNWLENBQUMsS0FBSyxFQUFDLElBQUksQ0FBQyxFQUNaLENBQUMsS0FBSyxFQUFDLElBQUksQ0FBQyxFQUNaLENBQUMsS0FBSyxFQUFDLElBQUksQ0FBQyxFQUNaLENBQUMsS0FBSyxFQUFDLElBQUksQ0FBQyxFQUNaLENBQUMsS0FBSyxFQUFDLElBQUksQ0FBQyxFQUNaLENBQUMsS0FBSyxFQUFDLElBQUksQ0FBQyxFQUNaLENBQUMsS0FBSyxFQUFDLElBQUksQ0FBQyxFQUNaLENBQUMsS0FBSyxFQUFDLElBQUksQ0FBQyxFQUNaLENBQUMsS0FBSyxFQUFDLElBQUksQ0FBQyxFQUNaLENBQUMsS0FBSyxFQUFDLElBQUksQ0FBQyxFQUNaLENBQUMsS0FBSyxFQUFDLElBQUksQ0FBQyxFQUNaLENBQUMsS0FBSyxFQUFDLElBQUksQ0FBQyxFQUNaLENBQUMsS0FBSyxFQUFDLElBQUksQ0FBQyxFQUNaLENBQUMsS0FBSyxFQUFDLElBQUksQ0FBQyxFQUNaLENBQUMsS0FBSyxFQUFDLElBQUksQ0FBQyxFQUNaLENBQUMsTUFBTSxFQUFDLElBQUksQ0FBQyxFQUNiLENBQUMsTUFBTSxFQUFDLElBQUksQ0FBQyxFQUNiLENBQUMsTUFBTSxFQUFDLElBQUksQ0FBQyxFQUNiLENBQUMsTUFBTSxFQUFDLElBQUksQ0FBQyxFQUNiLENBQUMsTUFBTSxFQUFDLElBQUksQ0FBQyxFQUNiLENBQUMsTUFBTSxFQUFDLElBQUksQ0FBQyxFQUNiLENBQUMsTUFBTSxFQUFDLElBQUksQ0FBQyxFQUNiLENBQUMsTUFBTSxFQUFDLElBQUksQ0FBQyxFQUNiLENBQUMsTUFBTSxFQUFDLElBQUksQ0FBQyxFQUNiLENBQUMsTUFBTSxFQUFDLElBQUksQ0FBQyxDQUNaLENBQUMsQ0FBQzs7QUFFSCxNQUFNLENBQUMsUUFBUSxDQUFDLENBQ2YsQ0FBQyxHQUFHLEVBQUMsSUFBSSxDQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsZUFBZSxFQUFDLE9BQU8sRUFBQyxPQUFPLEVBQUMsT0FBTyxDQUFDLENBQUMsRUFDMUQsQ0FBQyxLQUFLLEVBQUMsSUFBSSxDQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsZ0JBQWdCLEVBQUMsS0FBSyxFQUFDLE9BQU8sRUFBQyxPQUFPLENBQUMsQ0FBQyxFQUMzRCxDQUFDLEtBQUssRUFBQyxJQUFJLENBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxPQUFPLEVBQUMsS0FBSyxFQUFDLE9BQU8sRUFBQyxPQUFPLENBQUMsQ0FBQyxFQUNsRCxDQUFDLEtBQUssRUFBQyxJQUFJLENBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxnQkFBZ0IsRUFBQyxPQUFPLEVBQUMsT0FBTyxDQUFDLENBQUMsRUFDckQsQ0FBQyxLQUFLLEVBQUMsSUFBSSxDQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsT0FBTyxFQUFDLEtBQUssRUFBQyxPQUFPLENBQUMsQ0FBQyxFQUMzQyxDQUFDLEtBQUssRUFBQyxJQUFJLENBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxPQUFPLEVBQUMsS0FBSyxFQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQzNDLENBQUMsS0FBSyxFQUFDLElBQUksQ0FBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLE9BQU8sRUFBQyxLQUFLLEVBQUMsT0FBTyxDQUFDLENBQUMsRUFDM0MsQ0FBQyxLQUFLLEVBQUMsSUFBSSxDQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsT0FBTyxFQUFDLEtBQUssRUFBQyxPQUFPLENBQUMsQ0FBQyxFQUMzQyxDQUFDLEtBQUssRUFBQyxJQUFJLENBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxNQUFNLEVBQUMsT0FBTyxFQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQzNDLENBQUMsS0FBSyxFQUFDLElBQUksQ0FBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLG1CQUFtQixFQUFDLE9BQU8sRUFBQyxPQUFPLENBQUMsQ0FBQyxFQUN4RCxDQUFDLEtBQUssRUFBQyxJQUFJLENBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxlQUFlLEVBQUMsT0FBTyxFQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQ3BELENBQUMsS0FBSyxFQUFDLElBQUksQ0FBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLFNBQVMsRUFBQyxPQUFPLEVBQUMsT0FBTyxDQUFDLENBQUMsRUFDOUMsQ0FBQyxNQUFNLEVBQUMsSUFBSSxDQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsUUFBUSxFQUFDLE9BQU8sRUFBQyxPQUFPLENBQUMsQ0FBQyxFQUM5QyxDQUFDLE1BQU0sRUFBQyxJQUFJLENBQUMsR0FBRyxFQUFDLEdBQUcsRUFBQyxPQUFPLEVBQUMsS0FBSyxFQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQzVDLENBQUMsTUFBTSxFQUFDLElBQUksQ0FBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLFdBQVcsRUFBQyxPQUFPLEVBQUMsT0FBTyxDQUFDLENBQUMsRUFDakQsQ0FBQyxNQUFNLEVBQUMsSUFBSSxDQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsT0FBTyxFQUFDLEtBQUssRUFBQyxPQUFPLENBQUMsQ0FBQyxFQUM1QyxDQUFDLE1BQU0sRUFBQyxJQUFJLENBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxJQUFJLEVBQUMsS0FBSyxFQUFDLE9BQU8sRUFBQyxJQUFJLEVBQUMsSUFBSSxDQUFDLENBQUMsRUFDbEQsQ0FBQyxNQUFNLEVBQUMsSUFBSSxDQUFDLEdBQUcsRUFBQyxHQUFHLEVBQUMsSUFBSSxFQUFDLEtBQUssRUFBQyxPQUFPLEVBQUMsSUFBSSxFQUFDLElBQUksQ0FBQyxDQUFDLEVBQ25ELENBQUMsTUFBTSxFQUFDLElBQUksQ0FBQyxHQUFHLEVBQUMsR0FBRyxFQUFDLElBQUksRUFBQyxLQUFLLEVBQUMsT0FBTyxFQUFDLElBQUksRUFBQyxJQUFJLENBQUMsQ0FBQyxFQUNuRCxDQUFDLE1BQU0sRUFBQyxJQUFJLENBQUMsRUFBRSxFQUFDLEdBQUcsRUFBQyxRQUFRLEVBQUMsT0FBTyxFQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQzlDLENBQUMsTUFBTSxFQUFDLElBQUksQ0FBQyxFQUFFLEVBQUMsR0FBRyxFQUFDLFVBQVUsRUFBQyxPQUFPLEVBQUMsT0FBTyxDQUFDLENBQUMsRUFDaEQsQ0FBQyxNQUFNLEVBQUMsSUFBSSxDQUFDLEVBQUUsRUFBQyxHQUFHLEVBQUMsYUFBYSxFQUFDLE9BQU8sRUFBQyxPQUFPLENBQUMsQ0FBQyxDQUNuRCxFQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7O0FBRVQsSUFBSSxTQUFTLENBQUM7O0FBRWQsU0FBUyxJQUFJLENBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxHQUFHLEVBQUMsS0FBSyxFQUFDLElBQUksRUFBQyxJQUFJLEVBQUMsUUFBUSxFQUFDO0FBQzlDLFFBQU8sWUFBTTtBQUNaLFVBQVEsR0FBRyxRQUFRLElBQUksSUFBSSxDQUFDO0FB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SUFBSSxDQUFDO0FBQ1gsV0FBTyxFQUFFLENBQUM7SUFDVixDQUFBOztBQUVELE1BQUcsR0FDRixFQUFFLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUNoQixNQUFNLENBQUMsS0FBSyxDQUFDLENBQ2IsSUFBSSxDQUFDLEVBQUMsT0FBTyxFQUFDLFFBQVEsRUFBQyxRQUFRLEVBQUMsT0FBTyxFQUFDLENBQUMsQ0FBQztBQUM1QyxTQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ2hCLE9BQUksU0FBUyxHQUFHLFFBQVEsQ0FBQyxXQUFXLEdBQUcsR0FBRyxDQUFDO0FBQzNDLFlBQVMsT0FBTyxHQUNoQjtBQUNDLFFBQUksV0FBVyxHQUFHLFFBQVEsQ0FBQyxXQUFXLEdBQUcsU0FBUyxDQUFDO0FBQ25ELFVBQU0sQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDN0IsUUFBRyxDQUFDLEdBQUcsRUFBQztBQUNQLDBCQUFxQixDQUFDLE9BQU8sQ0FBQyxDQUFDO0tBQy9CO0lBQ0Q7QUFDRCxVQUFPLEVBQUUsQ0FBQztHQUNWLENBQUMsQ0FBQztFQUNILENBQUMsQ0FDRCxJQUFJLENBQUMsWUFBSSxFQUNULENBQUMsU0FDSSxDQUFDLFVBQUMsR0FBRyxFQUFHO0FBQUMsU0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztFQUFDLENBQUMsQ0FBQztDQUluQyIsImZpbGUiOiJqaW5nbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XHJcbmltcG9ydCBkZW5vZGVpZnkgZnJvbSAnLi4vanMvZGVub2RlaWZ5LmpzJztcclxuaW1wb3J0IGlwYyBmcm9tICdpcGMnO1xyXG5pbXBvcnQgcmVtb3RlIGZyb20gJ3JlbW90ZSc7XHJcbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2V2ZW50cyc7XHJcbiBcclxudmFyIGZzID0gcmVtb3RlLnJlcXVpcmUoJ2ZzJyk7XHJcbnZhciByZWFkRmlsZSA9IGRlbm9kZWlmeShmcy5yZWFkRmlsZSk7XHJcblxyXG5pcGMub24oJ3BsYXlWaWRlbycsIGZ1bmN0aW9uIChwYXRoKSB7XHJcbiAgICBkMy5zZWxlY3QoJ2JvZHknKVxyXG5cdFx0LmFwcGVuZCgndmlkZW8nKVxyXG5cdFx0LmF0dHIoeyBzcmM6IHBhdGgsIHdpZHRoOiAnMTAwJScsIGhlaWdodDogJzEwMCUnLCBhdXRvcGxheTogJ2F1dG9wbGF5JywgYXV0b2J1ZmZlcjogJ2F1dG9idWZmZXInIH0pXHJcblx0XHQub24oJ2VuZGVkJywgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRkMy5zZWxlY3QodGhpcykucmVtb3ZlKCk7XHJcblx0XHRcdGlwYy5zZW5kKCdwbGF5VmlkZW9FbmQnLCBwYXRoKTtcclxuXHRcdH0pO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIHRvQXJyYXlCdWZmZXIoYnVmZmVyKSB7XHJcbiAgICB2YXIgYWIgPSBuZXcgQXJyYXlCdWZmZXIoYnVmZmVyLmxlbmd0aCk7XHJcbiAgICB2YXIgdmlldyA9IG5ldyBVaW50OEFycmF5KGFiKTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnVmZmVyLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgdmlld1tpXSA9IGJ1ZmZlcltpXTtcclxuICAgIH1cclxuICAgIHJldHVybiBhYjtcclxufVxyXG5pcGMub24oJ3BsYXknLGZ1bmN0aW9uKHBhdGgpe1xyXG5cdHBsYXlDb250ZW50cyhwYXRoKTtcclxufSk7XHJcblxyXG52YXIgYXVkaW9DdHg7XHJcblx0dmFyIGx5bGljcyA9IFtcclxuXHRcdCdIYSBoYWhhaGEuLi4nLFxyXG5cdFx0J+OBiuOBi+OBl+OBhCDjg4/jg4Pjg4/jg4Pjg4/jg4Pjg48nLFxyXG5cdFx0J1NuYWtlIGlzIGhlcmUuJyxcclxuXHRcdCdNdXNpYyBtdXNpYyBtdXNpYyBtdXNpYyBzaG93IScsXHJcblx0XHQnT2gsIHRoZSBob3R0ZXN0IHRoaW5nIG9mIHRoZSB3b3JsZCEnLFxyXG5cdFx0J09mIHRoZSB3b3JsZC4uLiBPaCEnLFxyXG5cdFx0J1llbGxvdyBNYWdpYyBPcmNoZXN0cmEhIScsXHJcblx0XHQnTXVzaWMuLi4gTXVzaWMuLi4gWSBNIE8nLFxyXG5cdFx0J1lNTyByZWFkeSB0byBsYXkgb24geW91IScsXHJcblx0XHQnTmljZSBhZ2UuJ1x0XHRcclxuXHRdO1xyXG5cclxuXHJcbnZhciBzdmc7IC8vZDMuc2VsZWN0KCdib2R5JykuYXBwZW5kKCdzdmcnKS5hdHRyKHsnd2lkdGgnOicxMDI0cHgnLCdoZWlnaHQnOic3NjhweCd9KTtcclxuXHRcdFx0XHJcbndpbmRvdy5vbmxvYWQgPSAoKT0+e1xyXG5cdC8vIOWIneacn+WMluWujOS6hlxyXG5cdGF1ZGlvQ3R4ID0gbmV3IEF1ZGlvQ29udGV4dCgpO1xyXG59XHJcblxyXG5jbGFzcyBUcmFjayBleHRlbmRzIEV2ZW50RW1pdHRlciB7XHJcblx0Y29uc3RydWN0b3IoYXJyYXksbGF0ZW5jeSlcclxuXHR7XHJcblx0XHRsYXRlbmN5ID0gbGF0ZW5jeSB8fCAwO1xyXG5cdFx0c3VwZXIoKTtcclxuXHRcdHRoaXMuc2VxRGF0YSA9IGFycmF5O1xyXG5cdFx0dGhpcy5zZXFDb3VudGVyID0gMDtcclxuXHRcdHRoaXMubGF0ZW5jeSA9IGxhdGVuY3k7XHJcblx0fVxyXG5cdFxyXG5cdHNlcXVlbmNlKGN1cnJlbnRUaW1lKSB7XHJcblx0XHR2YXIgbGVuID0gdGhpcy5zZXFEYXRhLmxlbmd0aDtcclxuXHRcdGN1cnJlbnRUaW1lIC09IHRoaXMubGF0ZW5jeTtcclxuXHRcdHdoaWxlIChsZW4gPiB0aGlzLnNlcUNvdW50ZXIpIHtcclxuXHRcdFx0dmFyIHNlcSA9IHRoaXMuc2VxRGF0YVt0aGlzLnNlcUNvdW50ZXJdO1xyXG5cdFx0XHRpZiAoc2VxWzBdIDw9IGN1cnJlbnRUaW1lKSB7XHJcblx0XHRcdFx0c2VxWzFdKGN1cnJlbnRUaW1lKTtcclxuXHRcdFx0XHQrK3RoaXMuc2VxQ291bnRlcjtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0aWYobGVuIDw9IHRoaXMuc2VxQ291bnRlcil7XHJcblx0XHRcdFx0dGhpcy5lbWl0KCdlbmQnKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufTtcclxuXHJcbmNsYXNzIFRyYWNrcyBleHRlbmRzIEV2ZW50RW1pdHRlciB7XHJcblx0Y29uc3RydWN0b3IoKXtcclxuXHRcdHN1cGVyKCk7XHJcblx0XHR0aGlzLnRyYWNrcyA9IFtdO1xyXG5cdFx0dGhpcy5lbmRUcmFja0NvdW50ID0gMDtcclxuXHRcdHRoaXMuZW5kID0gZmFsc2U7XHJcblx0XHR0aGlzLmxhdGVuY3kgPSAwO1xyXG5cdH1cclxuXHRcclxuXHRhZGRUcmFjayhhcnJheSxsYXRlbmN5KXtcclxuXHRcdGxhdGVuY3kgPSBsYXRlbmN5IHx8IDA7XHJcblx0XHR0aGlzLmxhdGVuY3kgPSBsYXRlbmN5O1xyXG5cdFx0dmFyIHRyYWNrID0gbmV3IFRyYWNrKGFycmF5LGxhdGVuY3kpO1xyXG5cdFx0dGhpcy50cmFja3MucHVzaCh0cmFjayk7XHJcblx0XHR0cmFjay5vbignZW5kJywoKT0+e1xyXG5cdFx0XHQrK3RoaXMuZW5kVHJhY2tDb3VudDtcclxuXHRcdFx0aWYodGhpcy5lbmRUcmFja0NvdW50ID09IHRoaXMudHJhY2tzLmxlbmd0aCl7XHJcblx0XHRcdFx0dGhpcy5lbWl0KCdlbmQnKTtcclxuXHRcdFx0XHR0aGlzLmVuZCA9IHRydWU7XHJcblx0XHRcdH1cdFx0XHRcclxuXHRcdH0pO1xyXG5cdH1cclxuXHRcclxuXHRzZXF1ZW5jZShjdXJyZW50VGltZSl7XHJcblx0XHR0aGlzLnRyYWNrcy5mb3JFYWNoKCh0cmFjayk9PntcclxuXHRcdFx0dHJhY2suc2VxdWVuY2UoY3VycmVudFRpbWUpO1xyXG5cdFx0fSk7XHJcblx0fVxyXG59XHJcblxyXG52YXIgdHJhY2tzID0gbmV3IFRyYWNrcygpO1xyXG5cclxudmFyIHNlcURhdGEgPSBbXHJcblx0Ly8gc2VxdGltZSBhbmltXHJcblsxLjAyNSxoaWhhdF0sXHJcblsxLjQyMixoaWhhdF0sXHJcblsxLjgxOSxoaWhhdF0sXHJcblsyLjIxNixoaWhhdF0sXHJcblsyLjYxMyxoaWhhdF0sXHJcblszLjAxLGhpaGF0XSxcclxuWzMuNDA3LGhpaGF0XSxcclxuWzMuODA0LGhpaGF0XSxcclxuWzQuMjAxLGhpaGF0XSxcclxuWzQuNTk4LGhpaGF0XSxcclxuWzQuOTk1LGhpaGF0XSxcclxuWzUuMzkyLGhpaGF0XSxcclxuWzUuNzg5LGhpaGF0XSxcclxuWzYuMTg2LGhpaGF0XSxcclxuWzYuNTgzLGhpaGF0XSxcclxuWzYuOTgsaGloYXRdLFxyXG5bNy4zNzcsaGloYXRdLFxyXG5bNy43NzQsaGloYXRdLFxyXG5bOC4xNzEsaGloYXRdLFxyXG5bOC41NjgsaGloYXRdLFxyXG5bOC45NjUsaGloYXRdLFxyXG5bOS4zNjIsaGloYXRdLFxyXG5bOS43NTksaGloYXRdLFxyXG5bMTAuMTU2LGhpaGF0XSxcclxuWzEwLjU1MyxoaWhhdF0sXHJcblsxMC45NSxoaWhhdF0sXHJcblsxMS4zNDcsaGloYXRdLFxyXG5bMTEuNzQ0LGhpaGF0XSxcclxuWzEyLjE0MSxoaWhhdF0sXHJcblsxMi41MzgsaGloYXRdLFxyXG5bMTIuOTM1LGhpaGF0XSxcclxuWzEzLjMzMixoaWhhdF0sXHJcblsxMy43MjksaGloYXRdLFxyXG5bMTQuMTI2LGhpaGF0XSxcclxuWzE0LjUyMyxoaWhhdF0sXHJcblsxNC45MixoaWhhdF0sXHJcblsxNS4zMTcsaGloYXRdLFxyXG5bMTUuNzE0LGhpaGF0XVxyXG5dO1xyXG5cclxudHJhY2tzLmFkZFRyYWNrKHNlcURhdGEpO1xyXG50cmFja3MuYWRkVHJhY2soW1xyXG5bMi41NDEsYmFzc10sXHJcblsyLjYsYmFzc10sIFxyXG5bMi45MzksYmFzc10sXHJcblszLjU4MCxiYXNzXSxcclxuWzQuMTk0LGJhc3NdLFxyXG5bNC41MzgsYmFzc10sXHJcbls0Ljc5MSxiYXNzXSxcclxuWzUuMTIwLGJhc3NdLFxyXG5bNS4zNzMsYmFzc10sXHJcbls1LjcxMixiYXNzXSxcclxuWzUuOTk3LGJhc3NdLFxyXG5bNi4zMDksYmFzc10sXHJcbls2LjU3MyxiYXNzXSxcclxuWzYuNTc5LGJhc3NdLFxyXG5bOS4zNzMsYmFzc10sXHJcbls5LjUwMyxiYXNzXSxcclxuWzkuODkyLGJhc3NdLFxyXG5bMTEuMzUwLGJhc3NdLFxyXG5bMTEuNjUwLGJhc3NdLFxyXG5bMTIuNDc4LGJhc3NdLFxyXG5bMTIuOTQxLGJhc3NdLFxyXG5bMTMuMjcwLGJhc3NdLFxyXG5bMTQuMDU1LGJhc3NdLFxyXG5bMTQuNDY3LGJhc3NdLFxyXG5bMTQuNTI3LGJhc3NdLFxyXG5bMTUuMDk1LGJhc3NdLFxyXG5bMTUuNjYzLGJhc3NdXHJcbl0pO1xyXG5cclxudHJhY2tzLmFkZFRyYWNrKFtcclxuXHRbMC41LHRleHQoMTAsNDUwLCdKaW5nbGUgWS5NLk8uJywnd2hpdGUnLCcxMjBweCcsJ3NhZ29lJyldLFxyXG5cdFsyLjkzMCx0ZXh0KDEwLDQ1MCwnS295b2kgQW5hdGEgVG8nLCdyZWQnLCcxMjBweCcsJ3NhZ29lJyldLFxyXG5cdFs0LjE5OCx0ZXh0KDEwLDE1MCwnTXVzaWMnLCdyZWQnLCcxNjBweCcsJ3NhZ29lJyldLFxyXG5cdFs0LjU0OSx0ZXh0KDEwLDMwMCwnU25ha2UgaXMgaGVyZS4nLCd3aGl0ZScsJzEyMHB4JyldLFxyXG5cdFs0LjgzOCx0ZXh0KDUwMCwyMDAsJ011c2ljJywncmVkJywnMTQwcHgnKV0sXHJcblx0WzUuMzk0LHRleHQoMjAwLDI1MCwnTXVzaWMnLCdyZWQnLCcxMzBweCcpXSxcclxuXHRbNS45ODAsdGV4dCg2MDAsMzAwLCdNdXNpYycsJ3JlZCcsJzEyMHB4JyldLFxyXG5cdFs2Ljc3NSx0ZXh0KDIwMCw1MDAsJ1Nob3chJywncmVkJywnMjQwcHgnKV0sXHJcblx0WzcuMzY3LHRleHQoMTAsMzAwLCdPaCEsJywnV2hpdGUnLCczODBweCcpXSxcclxuXHRbOC4wNDcsdGV4dCgxMCw1MDAsJ3RoZSBob3R0ZXN0IHRoaW5nJywnV2hpdGUnLCcxMDBweCcpXSxcclxuXHRbOC44MTAsdGV4dCgxMCw2MDAsJ29mIHRoZSB3b3JsZC4nLCdXaGl0ZScsJzEwMHB4JyldLFxyXG5cdFs5LjkwMCx0ZXh0KDEwLDE1MCwnWWVsbG93ICcsJ1doaXRlJywnMjAwcHgnKV0sXHJcblx0WzExLjEzMix0ZXh0KDEwLDM1MCwnTWFnaWMgJywnV2hpdGUnLCcyMDBweCcpXSxcclxuXHRbMTEuMzQzLHRleHQoMjAwLDQwMCwnTXVzaWMnLCdyZWQnLCcyNDBweCcpXSxcclxuXHRbMTIuMDcyLHRleHQoMTAsNTUwLCdPcmNoZXN0cmEnLCdXaGl0ZScsJzIwMHB4JyldLFxyXG5cdFsxMi45NDEsdGV4dCgyMDAsNjAwLCdNdXNpYycsJ3JlZCcsJzI0MHB4JyldLFxyXG5cdFsxNC41MTgsdGV4dCgxMCw0NTAsJ1kuJywncmVkJywnMzIwcHgnLG51bGwsNTAwMCldLFxyXG5cdFsxNS4xMTcsdGV4dCgzNTAsNDUwLCdNLicsJ3JlZCcsJzMyMHB4JyxudWxsLDUwMDApXSxcclxuXHRbMTUuNzEzLHRleHQoNjkwLDQ1MCwnTy4nLCdyZWQnLCczMjBweCcsbnVsbCw1MDAwKV0sXHJcblx0WzE2LjQ1Nix0ZXh0KDEwLDE1MCwnWS5NLk8uJywnV2hpdGUnLCcyMDBweCcpXSxcclxuXHRbMTcuMzk0LHRleHQoMTAsMzEwLCdyZWFkeSB0bycsJ1doaXRlJywnMjAwcHgnKV0sXHJcblx0WzE3Ljg1NCx0ZXh0KDEwLDU1MCwnbGF5IG9uIHlvdSEnLCdXaGl0ZScsJzIwMHB4JyldXHJcbl0sLTAuMTUpO1xyXG5cclxudmFyIGZvbnRDYWNoZTtcclxuXHJcbmZ1bmN0aW9uIHRleHQoeCx5LG1lcyxjb2xvcixzaXplLGZvbnQsZHVyYXRpb24pe1xyXG5cdHJldHVybiAoKSA9PiB7XHJcblx0XHRkdXJhdGlvbiA9IGR1cmF0aW9uIHx8IDI1MDA7XHJcblx0XHR2YXIgc2NhbGUgPSAzLjA7XHJcblx0XHRmb250Q2FjaGUgPSBmb250IHx8IGZvbnRDYWNoZSB8fCAnJztcclxuXHRcdHZhciB0ZXh0ID0gc3ZnLmFwcGVuZCgndGV4dCcpXHJcblx0XHRcdC5hdHRyKHt4OngseTp5LGZpbGw6Y29sb3IsJ3RleHQtYW5jaG9yJzonc3RhcnQnLG9wYWNpdHk6MC4wLHRyYW5zZm9ybTogJ3NjYWxlKDEuMCknfSlcclxuXHRcdFx0LnN0eWxlKHsnZm9udC1zaXplJzpzaXplLCdmb250LWZhbWlseSc6Zm9udENhY2hlfSlcclxuXHRcdFx0LnRleHQobWVzKTtcclxuXHRcdFx0dmFyIGJveCA9IHRleHQubm9kZSgpLmdldEJCb3goKTtcclxuXHRcdFx0Y29uc29sZS5sb2coYm94LndpZHRoICsgJyAnICsgYm94LmhlaWdodCk7XHJcblx0XHRcdHZhciBkeCA9IGJveC53aWR0aCA7XHJcblx0XHRcdHZhciBkeSA9IGJveC5oZWlnaHQ7XHJcblx0XHRcdHRleHQuYXR0cih7eDp4LHk6eSxmaWxsOmNvbG9yLG9wYWNpdHk6MS4wLHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSgnICsgZHggKyAnLCcgKyBkeSArICcpLHNjYWxlKCcgKyBzY2FsZSArICcpLHRyYW5zbGF0ZSgnICsgKC1keCkgKyAnLCcgKyAoLWR5KSArICcpJ30pXHJcblx0XHRcdC50cmFuc2l0aW9uKClcclxuXHRcdFx0LmR1cmF0aW9uKDUwMClcclxuXHRcdFx0LmF0dHIoe3g6eCx5OnksdHJhbnNmb3JtOidzY2FsZSgxLjApIHRyYW5zbGF0ZSgwIDApJ30pXHJcblx0XHRcdC50cmFuc2l0aW9uKClcclxuXHRcdFx0LmR1cmF0aW9uKGR1cmF0aW9uKVxyXG5cdFx0XHQuYXR0cih7b3BhY2l0eTowLjB9KVxyXG5cdFx0XHQucmVtb3ZlKCk7XHJcblx0fTtcclxufVxyXG5cclxuZnVuY3Rpb24gYmFzcygpXHJcbntcclxuXHR2YXIgeCA9IDUxMixcclxuXHRcdHkgPSAzODQ7XHJcblx0dmFyIGcgPSBzdmdcclxuXHQuYXBwZW5kKCdnJyk7XHJcblx0XHJcblx0Zy5hdHRyKHt0cmFuc2Zvcm06J3RyYW5zbGF0ZSgnICsgeCArICcgJyAgKyB5ICArICcpJ30pXHJcblx0LnRyYW5zaXRpb24oKVxyXG5cdC5kZWxheSg1MDApXHJcblx0LnJlbW92ZSgpO1xyXG5cdFxyXG5cdHZhciBjb2xvcnMgPSBbJ3doaXRlJywncmVkJywnYmx1ZScsJ2dyZWVuJywnbWFnZW50YScsJ3llbGxvdyddO1xyXG5cdHZhciBjb2xvciA9IGNvbG9yc1soTWF0aC5yYW5kb20oKSAqIDYpIHwgMF07XHJcbiAgICBnLmFwcGVuZCgnZWxsaXBzZScpXHJcblx0LmF0dHIoe1xyXG5cdFx0cng6NjgwLHJ5OjY4MCxcclxuXHRcdGN4OjAsY3k6MCxcclxuXHRcdCdzdHJva2Utd2lkdGgnOjAsXHJcblx0XHRmaWxsOmNvbG9yLFxyXG5cdFx0b3BhY2l0eTowLjVcclxuXHR9KVxyXG5cdC50cmFuc2l0aW9uKClcclxuXHQuZHVyYXRpb24oMjUwKVxyXG5cdC5hdHRyKHtvcGFjaXR5OjAuMCxyeDowLHJ5OjB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGloYXQoKXtcclxuXHR2YXIgZyA9IHN2Z1xyXG5cdC5hcHBlbmQoJ2cnKTtcclxuXHR2YXIgeCA9IE1hdGgucmFuZG9tKCkgKiAoMTAyNCAtIDQwMCk7XHJcblx0dmFyIHkgPSBNYXRoLnJhbmRvbSgpICogKDc2OCAtIDEwMCkgKyA1MDtcclxuICAgIHZhciByID0gNDA7XHJcblx0dmFyIGNvbG9ycyA9IFsnd2hpdGUnLCdyZWQnLCdibHVlJywnZ3JlZW4nLCdtYWdlbnRhJywneWVsbG93J107XHJcblx0dmFyIGNvbG9yID0gY29sb3JzWyhNYXRoLnJhbmRvbSgpICogNikgfCAwXTtcclxuXHRnLmF0dHIoJ3RyYW5zZm9ybScsJ3RyYW5zbGF0ZSgnICsgeCArICcgJyArIHkgKyAnKScpO1xyXG5cdGcuYXBwZW5kKCdlbGxpcHNlJylcclxuXHQuYXR0cih7XHJcblx0XHRyeDpyLHJ5OnIsXHJcblx0XHRjeDowLGN5OjAsXHJcblx0XHQnc3Ryb2tlLXdpZHRoJzowLFxyXG5cdFx0ZmlsbDpjb2xvcixcclxuXHRcdG9wYWNpdHk6MC42XHJcblx0XHR9KVxyXG5cdC50cmFuc2l0aW9uKClcclxuXHQuZHVyYXRpb24oMjAwKVxyXG5cdC5hdHRyKHtjeDoxNTAscng6ciAqIDIuNX0pO1xyXG5cdFxyXG5cdGcuYXBwZW5kKCdlbGxpcHNlJylcclxuXHQuYXR0cih7XHJcblx0XHRyeDpyLHJ5OnIsXHJcblx0XHRjeDozMDAsY3k6MCxcclxuXHRcdCdzdHJva2Utd2lkdGgnOjAsXHJcblx0XHRmaWxsOmNvbG9yLFxyXG5cdFx0b3BhY2l0eTowLjBcclxuXHRcdH0pXHJcblx0LnRyYW5zaXRpb24oKVxyXG5cdC5kZWxheSgyMDApXHJcblx0LmF0dHIoJ29wYWNpdHknLDAuNik7XHJcblxyXG5cdGcuYXBwZW5kKCdlbGxpcHNlJylcclxuXHQuYXR0cih7XHJcblx0XHRyeDpyLHJ5OnIsXHJcblx0XHRjeDo0MDAsY3k6MCxcclxuXHRcdCdzdHJva2Utd2lkdGgnOjAsXHJcblx0XHRmaWxsOmNvbG9yLFxyXG5cdFx0b3BhY2l0eTowLjBcclxuXHRcdH0pXHJcblx0LnRyYW5zaXRpb24oKVxyXG5cdC5kZWxheSgzMzIpXHJcblx0LmF0dHIoJ29wYWNpdHknLDAuNik7XHJcblxyXG5cdHggPSBNYXRoLnJhbmRvbSgpICogMTAyNDtcclxuXHR5ID0gTWF0aC5yYW5kb20oKSAqIDc2ODtcclxuXHRcclxuXHRnLmF0dHIoe29wYWNpdHk6MC41fSlcclxuXHQudHJhbnNpdGlvbigpXHJcblx0LmRlbGF5KDM2NylcclxuXHQuZHVyYXRpb24oMjUwMClcclxuXHQuYXR0cih7J29wYWNpdHknOjAuMCx0cmFuc2Zvcm06J3RyYW5zbGF0ZSgnICsgeCArICcgJyArIHkgKyAnKSBzY2FsZSgwKSd9KVxyXG5cdC5yZW1vdmUoKTtcclxuXHRcclxuXHQvLyAudHJhbnNpdGlvbigpXHJcblx0Ly8gLmR1cmF0aW9uKDUpXHJcblxyXG5cdC8vIC5hdHRyKCdvcGFjaXR5JywwLjApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwbGF5Q29udGVudHMocGF0aClcclxue1xyXG5cdGNvbnNvbGUubG9nKHBhdGgpO1xyXG5cdHJlYWRGaWxlKHBhdGgpXHJcblx0LnRoZW4oKGRhdGEpPT57XHJcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUscmVqZWN0KT0+e1xyXG5cdFx0XHR2YXIgYWIgPSB0b0FycmF5QnVmZmVyKGRhdGEpOyBcclxuXHRcdFx0Y29uc29sZS5sb2coYWIuYnl0ZUxlbmd0aCk7XHJcblx0XHRcdGF1ZGlvQ3R4LmRlY29kZUF1ZGlvRGF0YShhYiwoYnVmZmVyKT0+e1xyXG5cdFx0XHRcdHJlc29sdmUoYnVmZmVyKTtcclxuXHRcdFx0fSwoZXJyKT0+e3JlamVjdChuZXcgRXJyb3IoJ2RlY29kZUF1ZGlvRGF0YSgpOmVycm9yOicpKTt9KTtcclxuXHRcdH0pO1xyXG5cdH0pXHJcblx0LnRoZW4oKGJ1ZmZlcik9PntcclxuXHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSxyZWplY3QpPT57XHJcblx0XHRcdHZhciBzb3VyY2UgPSBhdWRpb0N0eC5jcmVhdGVCdWZmZXJTb3VyY2UoKTtcclxuXHRcdFx0dmFyIGVuZCA9IGZhbHNlO1xyXG5cdFx0XHRzb3VyY2UuYnVmZmVyID0gYnVmZmVyO1xyXG5cdFx0XHRzb3VyY2UuY29ubmVjdChhdWRpb0N0eC5kZXN0aW5hdGlvbik7XHJcblx0XHRcdHNvdXJjZS5vbmVuZGVkID0gKCk9PlxyXG5cdFx0XHR7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coJ2VuZCcpO1xyXG5cdFx0XHRcdGVuZCA9IHRydWU7XHJcblx0XHRcdFx0cmVzb2x2ZSgpO1xyXG5cdFx0XHR9IFxyXG5cdFx0XHQvLyDjgqLjg4vjg6Hjg7zjgrfjg6fjg7Pjga7jgrnjgr/jg7zjg4hcclxuXHRcdFx0c3ZnID0gXHJcblx0XHRcdFx0ZDMuc2VsZWN0KCdib2R5JylcclxuXHRcdFx0XHQuYXBwZW5kKCdzdmcnKVxyXG5cdFx0XHRcdC5hdHRyKHsnd2lkdGgnOicxMDI0cHgnLCdoZWlnaHQnOic3NjhweCd9KTtcclxuXHRcdFx0c291cmNlLnN0YXJ0KDApO1xyXG5cdFx0XHR2YXIgc3RhcnRUaW1lID0gYXVkaW9DdHguY3VycmVudFRpbWUgLSAwLjE7XHJcblx0XHRcdGZ1bmN0aW9uIGFuaW1hdGUoKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dmFyIGN1cnJlbnRUaW1lID0gYXVkaW9DdHguY3VycmVudFRpbWUgLSBzdGFydFRpbWU7XHJcblx0XHRcdFx0dHJhY2tzLnNlcXVlbmNlKGN1cnJlbnRUaW1lKTtcclxuXHRcdFx0XHRpZighZW5kKXtcclxuXHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0YW5pbWF0ZSgpO1xyXG5cdFx0fSk7XHJcblx0fSlcclxuXHQudGhlbigoKT0+e1xyXG5cdH0pXHJcblx0LmNhdGNoKChlcnIpPT57Y29uc29sZS5sb2coZXJyKTt9KTtcclxuXHJcblx0XHJcblxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
